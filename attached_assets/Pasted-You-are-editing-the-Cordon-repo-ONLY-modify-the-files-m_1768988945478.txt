You are editing the Cordon repo. ONLY modify the files mentioned. Do NOT refactor, rename, or reformat unrelated code. Keep existing logic intact unless explicitly instructed.

GOAL:
Fix WalletConnect auto-detect in the in-app browser:
1) Stop "Connecting to dApp..." overlay from showing on normal page views.
2) Make WC URI capture FAST (sub-second when possible) by intercepting localStorage/sessionStorage writes (Storage.setItem) and doing a short burst scan.
3) Inject scripts into iframes as well (some Web3Modal flows run in iframes).
4) Add native-level intercept for wc: / walletconnect links in onShouldStartLoadWithRequest (fast path).
5) Keep debug output visible and do not break existing WalletConnect pairing.

========================================================
FILE TO EDIT:
client/screens/BrowserWebViewScreen.tsx
========================================================

A) WEBVIEW PROPS (IMPORTANT)
Find the <WebView ... /> block and add these props (do not remove existing props):
- originWhitelist={["*"]}  (if not already)
- injectedJavaScriptForMainFrameOnly={false}
- injectedJavaScriptBeforeContentLoadedForMainFrameOnly={false}

Keep:
injectedJavaScript={COMBINED_INJECTED_SCRIPT}
injectedJavaScriptBeforeContentLoaded={COMBINED_INJECTED_SCRIPT}

B) FIX onShouldStartLoadWithRequest TO CATCH wc: LINKS (FAST PATH)
In handleShouldStartLoad (or whatever is passed to onShouldStartLoadWithRequest),
add a TOP-PRIORITY check before any other return:

1) If request.url starts with "wc:" or "walletconnect:" -> call handleWalletConnectUri(url) and return false.
2) If request.url contains an encoded WC URI in query param:
   - patterns: "uri=wc%3A", "wc%3A", "walletconnect%3A"
   - Extract the param "uri" if present, decodeURIComponent, and if it includes "wc:" call handleWalletConnectUri(decodedUri) and return false.
3) Also handle WalletConnect universal link format:
   - if URL contains "link.walletconnect.org" and includes "uri=" -> decode it and handleWalletConnectUri
Return false when intercepted so WebView does not navigate away.

Make sure this does NOT trigger on normal http(s) URLs.

C) FIX NATIVE onMessage PARSING (STOP LOADER SPAM)
In handleWebViewMessage (the function used by onMessage):
- ALWAYS log the raw string first.
- Then:
  1) If raw is a string and begins with "DEBUG_" or "INJECT_" or "PING_" -> treat as debug only and RETURN (do not toggle loader).
  2) Else attempt JSON.parse ONLY if raw.trim().startsWith("{") AND raw includes '"type"'.
     If parse fails, RETURN (do not toggle loader).
  3) After parsing, only act on known message types:
     - type === "WC_CONNECTING"  -> call handleWcButtonClicked()
     - type === "WC_URI"         -> call handleWalletConnectUri(msg.uri)
     - type === "WC_BUTTON_CLICKED" -> DO NOT show loader anymore (this type is noisy). Instead, ignore or optionally log. The loader will be driven by WC_CONNECTING only.
Any unknown types: ignore.

D) FIX LOADER STATE LIFECYCLE
Right now your loader can stick or fire at wrong time. Adjust:

- handleWcButtonClicked(): keep as “setIsWcConnecting(true)” + 8s timeout, BUT make it idempotent:
  If isWcConnecting is already true, do nothing (avoid re-trigger spam).

- handleWalletConnectUri(uri):
  When uri is received, setIsWcConnecting(true) (keep showing while pairing),
  then after wcConnect(uri) completes or throws, setIsWcConnecting(false) in finally.

- Also in handleLoadStart: setIsWcConnecting(false) (navigation resets UI)
  (Do NOT affect active pairing if wcPairingInProgress.current is true)

========================================================
E) UPDATE WALLETCONNECT INJECTED SCRIPT (FAST CAPTURE + NO SPAM)
In the same file, find WALLETCONNECT_CAPTURE_SCRIPT string.

1) ADD STORAGE INTERCEPTION (MOST IMPORTANT)
Inside the IIFE near the top, add a safe wrapper for Storage.prototype.setItem:

- Save original:
  var __origSetItem = Storage.prototype.setItem;

- Override:
  Storage.prototype.setItem = function(key, value) {
    try {
      // Only react to WC-related keys or values
      var k = (key || '').toString();
      var v = (value || '').toString();
      if (v.includes('wc:') || v.includes('walletconnect:') || k.includes('wc@') || k.toLowerCase().includes('walletconnect') || k.toLowerCase().includes('w3m') || k.toLowerCase().includes('reown')) {
        // Send immediate UX signal once per 1200ms max
        postConnecting('storage');
        // Extract URI from value ASAP
        var wc = extractWcFromText(v);
        if (wc) postWc(wc);
      }
    } catch (e) {}
    return __origSetItem.apply(this, arguments);
  };

2) ADD A CONTROLLED “BURST SCAN” (FAST BUT NOT FOREVER)
Add:
- var burstTimer = null;
- function startBurstScan(ms, interval) { clear old; setInterval deepScanForWcUri(); stop after ms; }

Call startBurstScan(6000, 120) when:
- a modal is detected (w3m/wcm/appkit)
- OR WalletConnect is clicked (only if we can detect it)

3) STOP THE OVERLY-BROAD CLICK HANDLER
You currently trigger on ANY element containing "connect" / className includes "connect".
That’s why the loader shows everywhere.

Modify the click listener at the bottom:
- REMOVE the "Other wallet-related button clicks" block that checks:
  text.includes('wallet') || text.includes('connect') || className.includes('connect') ...
This must be removed or heavily narrowed.

Keep ONLY WalletConnect-specific detection:
- exact "walletconnect" text
- elements with dataset/testid/id containing walletconnect/wc
- href containing "wc:" or "walletconnect:"
When detected:
- postConnecting('wc_click')  (NEW)
- startBurstScan(8000, 120)

4) ADD postConnecting() MESSAGE (NEW)
Near postWc(), add:
function postConnecting(reason) {
  try {
    if (!window.ReactNativeWebView) return;
    var now = Date.now();
    if (window.__cordonLastConn && (now - window.__cordonLastConn) < 1200) return;
    window.__cordonLastConn = now;
    window.ReactNativeWebView.postMessage(JSON.stringify({ type: 'WC_CONNECTING', reason: reason || 'unknown' }));
  } catch (e) {}
}

5) MODAL DETECTION SHOULD TRIGGER BURST + CONNECTING
Inside MutationObserver where you detect w3m-modal / wcm-modal / appkit-modal:
- call postConnecting('modal')
- call startBurstScan(8000, 120)
- do NOT auto-click anything by default (autoClick often fails and can break UX).
Keep autoClickWalletConnect as optional, but set it OFF by default:
  - add var ENABLE_AUTCLICK = false;
  - only call autoClickWalletConnect if ENABLE_AUTCLICK === true

6) INITIAL SCAN
After script injection logs, call:
setTimeout(function(){ startBurstScan(2500, 150); }, 200);

7) ERROR REPORTING
Keep your INJECT_BEFORE_START/AFTER_END and INJECT_ERROR posts if present.
If not present, wrap the script body in try/catch and post INJECT_ERROR with message+stack.

========================================================
F) DEBUG BANNER SHOULD BE CLEAR
Your “WV MSG #” toast is OK. Ensure it’s not hidden behind safe area:
- Place the debug banner container at absolute top with paddingTop using insets if available.
- But DO NOT redesign UI. Just ensure it renders.

========================================================
G) TEST CHECKLIST (DO NOT SKIP)
1) Open Browser -> go to https://app.uniswap.org
2) Do NOT touch connect; verify loader DOES NOT appear.
3) Tap Connect -> choose WalletConnect -> within 0.2–1.5s you should see:
   - debug message(s) and/or connect sheet
   - loader should show ONLY after WC_CONNECTING message (not constantly)
4) Open https://opensea.io -> same expectations.
5) Confirm that DEBUG_PING_onLoadEnd still shows (injection working).
6) Confirm no repeated "Connecting..." spam while browsing.

DELIVERABLE:
Return with a short summary of EXACT edits you made and the exact locations (function names / blocks), no generic explanations.