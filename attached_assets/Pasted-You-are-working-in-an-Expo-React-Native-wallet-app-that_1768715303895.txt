You are working in an Expo + React Native wallet app that uses Jupiter (v6) for Solana swaps. Users want Cordon to earn swap revenue via Jupiter platform fees, but swaps are failing with: “Transaction simulation failed… Jupiter Route… custom program error: 0x1788”. Implement a safe, non-breaking platform-fee system + verification.

GOALS
1) Do NOT break existing working swaps. Platform fees must be OFF by default.
2) Add an optional “platform fee” (bps) that, when enabled, routes fees to Cordon’s treasury fee account through Jupiter’s fee mechanism.
3) Fix the 0x1788 failure by ensuring we only attach platformFeeBps when a valid feeAccount exists (and is created). Otherwise: proceed with fee OFF and show a clear debug log / UI note.
4) Add a developer-only verification helper to confirm fees are being collected (check balance deltas and show tx explorer link).

KEY FACTS (Jupiter v6)
- Quote request supports PlatformFeeBps (fee taken from output token). 
- Swap request supports FeeAccount. FeeAccount must exist and is described by Jupiter as a “Fee token account … derived using seeds = [‘referral_ata’, referral_account, mint] and the REFER4… referral contract; only pass if you set feeBps and ensure feeAccount has been created.” (This is why missing/invalid feeAccount can cause swap simulation failure.) 
- Therefore: never set platformFeeBps unless we have a known-good feeAccount for the output mint.

IMPLEMENTATION PLAN
A) Find the Solana swap/Jupiter service (search: “quote-api.jup.ag”, “/v6/quote”, “/v6/swap”, “createJupiterApiClient”, “platformFeeBps”, “feeAccount”, “JUP6LkbZ”).
B) Add config:
   - CORDON_PLATFORM_FEE_BPS (number, default 0)
   - CORDON_REFERRAL_ACCOUNT (public key string, optional)
   - CORDON_FEE_ENABLED (boolean, default false)
   These can be set in a config file or constants file.
C) Add a FeeAccount resolver:
   - Given outputMint and swapMode, resolve the correct fee mint (ExactIn -> output mint; ExactOut -> input mint).
   - Try to resolve feeAccount in this order:
     1) If app already stores a pre-created feeAccount for this mint, use it.
     2) If we have a known list/map of fee accounts per mint (env/config), use it.
     3) Otherwise return null (fee not ready).
   NOTE: Do NOT attempt to invent a feeAccount address. If you don’t have the referral program integration to create it, keep fee disabled to avoid breaking swaps.
D) Modify quote request builder:
   - If CORDON_FEE_ENABLED && CORDON_PLATFORM_FEE_BPS > 0 AND feeAccount is resolved for the expected fee mint,
     include platformFeeBps in quote params.
   - Else do not include platformFeeBps.
E) Modify swap request builder:
   - If platformFeeBps was applied to the quote AND feeAccount exists, include feeAccount in the swap request payload.
   - Else omit feeAccount.
F) Failure fallback:
   - If swap simulation fails and logs contain “custom program error: 0x1788”, automatically retry once with fees OFF (platformFeeBps removed and feeAccount removed). 
   - Log: “[SwapFee] FeeAccount missing/invalid for mint <mint>. Retried without fee.”
   - Return a friendly UI message for dev builds: “Platform fee disabled (fee account not set up). Swap executed without fee.”
G) Fee verification helper (dev only):
   - After a successful swap tx signature, if fee was enabled:
     1) Query and store feeAccount token balance BEFORE sending tx.
     2) After confirmation, query balance again.
     3) Compute delta and compare to expectedFee ~= outputAmount * feeBps/10000.
     4) Log results and show in a small debug panel: feeBps, feeMint, feeAccount, expectedFee, receivedFee, txSig (explorer link).
H) Minimal UI:
   - Do not expose to normal users.
   - Add a “Dev Tools” toggle or only show when __DEV__ is true.
   - If fee isn’t enabled because feeAccount missing, show: “Cordon fee account not configured for this output token. Fees OFF.”

ACCEPTANCE TESTS
1) With fees OFF (default): swaps behave exactly as before.
2) With fees ON but feeAccount missing: swap still succeeds (auto disables fee, retries without fee), no crash.
3) With fees ON and a valid feeAccount configured: swap succeeds and feeAccount balance increases.
4) Add logging around quote params and swap payload (redact private keys): show whether platformFeeBps+feeAccount were applied.

DELIVERABLES
- Updated Jupiter swap service code with safe fee gating + retry fallback.
- A small dev verification helper to confirm fee collection.
- No regressions in existing swap flows.

Proceed to implement now.