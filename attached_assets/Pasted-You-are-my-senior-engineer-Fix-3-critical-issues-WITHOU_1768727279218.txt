You are my senior engineer. Fix 3 critical issues WITHOUT breaking existing working flows. Make minimal, safe changes. After each change, run/verify and report exactly what you changed + where.

PROJECT CONTEXT
- App: Cordon mobile (React Native / Expo) with Solana swap (Jupiter) + Pump.fun routing.
- Swap quote flow: client → /api/swap/solana/route-quote → server/swap/route.ts decides Jupiter vs Pump.fun → server/swap/jupiter.ts getQuote() fetches Jupiter quote → client displays quote + rate.
- There is a SOL-based "success fee" charged AFTER swap confirms (separate tx). Platform fee (Jupiter referral fee bps) must be DISABLED for now.
- Current error: USDC→SOL swap fails with Jupiter custom error 0x1788 / 6024 when using MAX; small amounts (ex 1 USDC) can succeed.
- Another bug: quote UI shows insane rate like "1 USDC = 7 SOL" and 8 USDC → 57 SOL (clearly decimals/unit conversion bug).

GOALS (DO ALL)
A) FIX QUOTE DECIMALS + AMOUNT UNITS (GLOBAL, ALL TOKENS)
1) Identify where we convert:
   - UI amount (decimal string) → atomic integer amount sent to backend/Jupiter quote
   - Jupiter quote outAmount (atomic string) → UI display amount
   - rate display (1 input token = X output token)
2) Implement a single source of truth utility:
   - uiToAtomic(uiAmount: string, decimals: number) => string (integer)
   - atomicToUi(atomic: string, decimals: number) => string (decimal)
   - safe parsing/rounding; do NOT use floating math for atomic conversions; use bigints / decimal libs if already in repo, otherwise implement carefully.
3) Fetch/resolve decimals correctly for ANY mint:
   - For SOL: decimals = 9 (native SOL; WSOL mint So111... is also 9)
   - For USDC: decimals = 6
   - For unknown tokens: read decimals from mint account on-chain using existing Solana connection utilities in the project (SPL + Token-2022 compatible). Cache results.
   - The fix must work for both SPL Token and Token-2022 mints.
4) Update client quote request to backend so the "amount" passed is ALWAYS atomic integer of the INPUT mint using the INPUT mint decimals (not output decimals). This is likely the 1000x bug causing 7 SOL per USDC.
5) Update UI formatting so the displayed "You receive" value uses output decimals properly.
6) Add a small unit test or dev-mode assertion/log that checks: for USDC→SOL, 1 USDC should be around ~0.00x SOL, not >1 SOL (guardrail only, don’t crash prod).

B) MAX / SPENDABLE & BUFFER LOGIC (GLOBAL, ALL TOKENS)
We must prevent “MAX” swaps that later fail due to fee/rent buffers.
1) For SOL input swaps:
   - Keep existing “Spendable” behavior: spendableSOL = balanceSOL - estimatedNetworkAndPriorityFees - rentBufferIfNeeded - postSwapSuccessFeeBuffer
   - Ensure spendable never goes negative; clamp to 0.
2) For NON-SOL input swaps (ex USDC→SOL):
   - MAX should set input token to full token balance (that’s fine),
   - BUT block swap if wallet SOL balance is too low to pay network fees and any ATA rent the tx may need.
   - Add a computed requirement: requiredSolForTx = baseFeeEstimate + selectedSpeedModePriorityFee + safetyBuffer (e.g. 0.002 SOL) + optional rent buffer (for possible ATA creation).
   - If current SOL < requiredSolForTx, show a clear error: “Need ~X SOL for network fees / account rent” and disable Swap button.
3) IMPORTANT: do NOT invent a fixed platform fee here. The fee model is:
   - Platform fee via Jupiter referral: DISABLED for now.
   - Success fee: still charged after swap confirms (existing system).
So “buffer” is for NETWORK FEES and RENT only, not a hidden extra fee.
4) Apply this logic for ALL tokens (SPL + Token-2022), not just USDC.

C) DISABLE JUPITER PLATFORM FEES COMPLETELY (FOR NOW)
We’re done fighting 0x1788. Make sure we do not send any platform fee params to Jupiter swap builder.
1) In server/swap/jupiter.ts (and anywhere else), ensure:
   - No feeAccount
   - No platformFeeBps
   - No referral program derivations
   - No disablePlatformFee flag reliance (assume Jupiter may ignore it)
2) Confirm by logging once per swap build: “[SwapFee] Platform fees: DISABLED (no fee params sent)”
3) Keep the existing SOL-based success fee system intact.

D) FIX NAV FLOW: ASSET PAGE → SEND SHOULD OPEN SEND FORM DIRECTLY
Issue: On AssetDetail (token page), tapping Send currently opens token picker list first (like pic2). It must open the preselected token send form directly (like pic3).
1) Find navigation route for Send screen.
2) Add param like preselectedMint / preselectedAssetId when navigating from AssetDetail.
3) In Send screen:
   - if preselectedMint exists, skip the asset selection step and render the send form immediately for that mint.
   - still allow changing token via a “Change” button if needed.

ACCEPTANCE TESTS (YOU MUST RUN/VERIFY)
1) Quote sanity:
   - USDC→SOL: 1 USDC shows ~0.00x SOL (not 7 SOL).
   - 8 USDC should be ~0.05–0.07 SOL range depending on price, not tens of SOL.
2) Swap:
   - Small USDC→SOL works.
   - MAX USDC→SOL works IF there is enough SOL for network/rent; if not enough SOL, Swap is disabled with correct message (not Jupiter 0x1788).
3) SOL input:
   - Spendable SOL still works; Max uses spendable amount not full balance.
4) Platform fees:
   - Confirm via logs that NO platform fee params are sent to Jupiter.
5) AssetDetail→Send:
   - pressing Send from asset detail opens send form directly with that asset selected.

DELIVERABLE
- Implement changes with minimal diffs.
- Tell me exactly which files you edited and why.
- Do not refactor unrelated code.