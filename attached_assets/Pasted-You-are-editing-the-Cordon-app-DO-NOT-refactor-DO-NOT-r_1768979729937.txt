You are editing the Cordon app. DO NOT refactor. DO NOT rename files. DO NOT change unrelated logic. Make ONLY the changes below. If something is missing, STOP and ask.

GOAL:
1) Make WalletConnect auto-detect faster inside the in-app browser by intercepting WalletConnect URI the moment it is written to storage (no polling delay).
2) Make loader UX consistent: show loader instantly on user intent + keep it on while pairing, then hide when pairing finishes/fails.

========================
A) PATCH INJECTED SCRIPT
========================
File: client/screens/BrowserWebViewScreen.tsx
Find the string const WALLETCONNECT_CAPTURE_SCRIPT = ` ... `.
Inside that injected script, AFTER these lines (near the top):

  var lastPostedUri = '';
  var lastPostTime = 0;
  var autoClickedWc = false;

ADD the following helper + Storage.setItem interception EXACTLY (do not delete existing scanStorage/deepScan logic; keep it as fallback):

---- START INSERT ----
function postConnecting(reason) {
  try {
    if (!window.ReactNativeWebView) return;
    window.ReactNativeWebView.postMessage(JSON.stringify({ type: 'WC_CONNECTING', reason: reason || 'unknown' }));
  } catch (e) {}
}

function maybeCaptureFromString(key, raw) {
  try {
    if (!raw) return;
    var str = (typeof raw === 'string') ? raw : String(raw);
    // Fast path: direct wc: in value
    if (str.includes('wc:') || str.includes('walletconnect:')) {
      var wc = extractWcFromText(str);
      if (wc) { postWc(wc); return true; }
    }

    // If value is JSON-ish and key looks related, try parse and search
    if (key && (key.includes('wc@') || key.toLowerCase().includes('walletconnect') || key.toLowerCase().includes('w3m') || key.toLowerCase().includes('wagmi') || key.toLowerCase().includes('reown'))) {
      // Try parse JSON for nested uri fields
      try {
        var obj = JSON.parse(str);
        // common shapes: { uri: "wc:..." } or deep nested
        var jsonStr = JSON.stringify(obj);
        var wc2 = extractWcFromText(jsonStr);
        if (wc2) { postWc(wc2); return true; }
      } catch (e) {}
    }
  } catch (e) {}
  return false;
}

(function hookStorageSetItem() {
  try {
    if (window.__cordonStorageHooked) return;
    window.__cordonStorageHooked = true;

    var proto = (window.Storage && Storage.prototype) ? Storage.prototype : null;
    if (!proto || !proto.setItem) return;

    var origSetItem = proto.setItem;
    proto.setItem = function(key, value) {
      try {
        // User intent: storage writes usually happen right after tapping "WalletConnect"
        // Trigger loader immediately (native will debounce)
        if (key && (String(key).includes('wc@') || String(key).toLowerCase().includes('walletconnect') || String(key).toLowerCase().includes('w3m') || String(key).toLowerCase().includes('wagmi') || String(key).toLowerCase().includes('reown'))) {
          postConnecting('storage_setItem:' + String(key));
        }
        // Capture WC URI at the exact moment it's written
        var captured = maybeCaptureFromString(String(key || ''), value);
        if (!captured) {
          // Safety: sometimes the URI is written in a separate key a few ms later
          setTimeout(function(){ try { scanStorage(); scanForQrUri(); } catch(e){} }, 0);
        }
      } catch (e) {}
      return origSetItem.apply(this, arguments);
    };

    // Also hook removeItem to allow native UI to clear loader if desired later
    var origRemoveItem = proto.removeItem;
    proto.removeItem = function(key) {
      return origRemoveItem.apply(this, arguments);
    };

    console.log('[Cordon] Storage.setItem hooked');
  } catch (e) {
    console.log('[Cordon] Storage hook error:', e);
  }
})();
---- END INSERT ----

IMPORTANT: Do not remove the existing scanStorage(), deepScanForWcUri(), observers, click handlers, etc. This is a fast-path interception.

Additionally:
- In the click handler that currently sends { type: 'WC_BUTTON_CLICKED' }, KEEP it.
- But also add one line right before the aggressive scan starts:
    postConnecting('user_click_walletconnect');
So it triggers native loader immediately even before storage writes.

Find this block:

  if (isWcButton) {
    console.log('[Cordon] WalletConnect clicked - starting aggressive scan');
    if (window.ReactNativeWebView) {
      window.ReactNativeWebView.postMessage(JSON.stringify({ type: 'WC_BUTTON_CLICKED' }));
    }
    // Very aggressive scanning ...

ADD this line right after the console.log, before postMessage:
    postConnecting('user_click_walletconnect');

========================
B) NATIVE MESSAGE HANDLING
========================
File: client/screens/BrowserWebViewScreen.tsx
Find the WebView onMessage handler / message switch where it currently handles WC_URI and WC_BUTTON_CLICKED (or wherever you parse JSON messages from injected script).

Make sure it handles these message types:

1) "WC_URI" => call handleWalletConnectUri(uri)
2) "WC_BUTTON_CLICKED" => call handleWcButtonClicked()
3) "WC_CONNECTING" => ALSO call handleWcButtonClicked() (same loader behavior)
   - Do not spam state updates: handleWcButtonClicked already debounces via timeout.

If "WC_CONNECTING" is not currently handled, add it.

========================
C) LOADER BEHAVIOR FIX
========================
File: client/screens/BrowserWebViewScreen.tsx
In handleWalletConnectUri, you currently do:
  setIsWcConnecting(false);

That is WRONG for UX because it hides the loader exactly when we start pairing.

Change it to:
  setIsWcConnecting(true);

Then:
- Keep clearing wcConnectTimeout if present.
- After wcConnect(uri) completes (success or error), ensure the loader turns off.

So in finally{} block of handleWalletConnectUri, ADD:
  setIsWcConnecting(false);

Result:
- Tap WC => loader shows instantly (WC_CONNECTING / WC_BUTTON_CLICKED)
- URI captured => loader stays on while pairing
- Pair finishes/fails => loader turns off

========================
D) SAFETY / NO DOUBLE INJECTION
========================
Do NOT change WebView injection props. The script already guards:
  if (window.__cordonWcCapture) return;
So keep it.

========================
E) QUICK TEST CHECKLIST
========================
After patch:
1) Open OpenSea in Cordon browser -> Connect -> WalletConnect
   - Loader appears immediately (no dead air).
   - Within ~0.5-2s pairing sheet appears without needing copy/paste.
2) Console shows:
   - "[Cordon] Storage.setItem hooked"
   - "[Cordon] Posting WC URI: ..."
3) If a dApp never writes URI to storage, fallback polling still works.

Deliver only the code changes. Do not add new dependencies.